{% comment %}
  Minimal Email Signup section
  - Newsletter form with heading, text, button
  - Scoped styles per-section for safety
{% endcomment %}

<section class="email-signup email-signup--{{ section.id }}">
  <div class="email-signup__inner email-signup__inner--{{ section.settings.alignment }}">
    {% if section.settings.heading != blank %}
      <h2 class="email-signup__heading">{{ section.settings.heading }}</h2>
    {% endif %}
    {% if section.settings.text != blank %}
      <div class="email-signup__text">{{ section.settings.text }}</div>
    {% endif %}

    {% form 'customer', class: 'email-signup__form', id: 'NewsletterForm-{{ section.id }}' %}
      <input type="hidden" name="contact[tags]" value="newsletter">
      <label class="visually-hidden" for="NewsletterEmail-{{ section.id }}">Email</label>
      <input
        id="NewsletterEmail-{{ section.id }}"
        class="email-signup__input"
        type="email"
        name="contact[email]"
        placeholder="{{ 'Email address' | t }}"
        required
        autocapitalize="off"
        autocomplete="email"
        spellcheck="false"
      >
      <button type="submit" class="email-signup__button">{{ section.settings.button_label }}</button>

      {% if form.posted_successfully? %}
        <p class="email-signup__message email-signup__message--success">{{ section.settings.success_text }}</p>
      {% elsif form.errors %}
        <p class="email-signup__message email-signup__message--error">{{ form.errors.translated_fields['email'] | default: 'Email' }} {{ form.errors.messages['email'] }}</p>
      {% endif %}
    {% endform %}
  </div>

  <style>
    .email-signup--{{ section.id }}{
      padding: {{ section.settings.padding_top }}px 0 {{ section.settings.padding_bottom }}px;
    }
    .email-signup--{{ section.id }} .email-signup__inner{
      width: min(800px, 92vw);
      margin: 0 auto;
      text-align: center;
    }
    .email-signup--{{ section.id }} .email-signup__inner--left{ text-align: left; }
    .email-signup--{{ section.id }} .email-signup__inner--right{ text-align: right; }

    .email-signup--{{ section.id }} .email-signup__heading{
      margin: 0 0 .5rem; font-weight: 500;
    }
    .email-signup--{{ section.id }} .email-signup__text{
      margin: 0 0 1rem; opacity: .9;
    }
    .email-signup--{{ section.id }} .email-signup__form{
      display: grid; grid-template-columns: 1fr auto; gap: .5rem;
    }
    @media (max-width: 640px){
      .email-signup--{{ section.id }} .email-signup__form{ grid-template-columns: 1fr; }
    }
    .email-signup--{{ section.id }} .email-signup__input{
      padding: .85rem 1rem; border: 1px solid #ddd; border-radius: 999px; width: 100%;
    }
    .email-signup--{{ section.id }} .email-signup__button{
      padding: .85rem 1.2rem; border-radius: 999px; border: 1px solid #111; background:#111; color:#fff;
    }
    .email-signup--{{ section.id }} .email-signup__button:hover{ opacity:.95; transform: translateY(-1px); }
    .email-signup--{{ section.id }} .email-signup__message{ margin-top: .5rem; font-size: .9rem; }
    .email-signup--{{ section.id }} .email-signup__message--success{ color: #1a7f37; }
    .email-signup--{{ section.id }} .email-signup__message--error{ color: #c62828; }
  </style>
</section>

{% schema %}
{
  "name": "Email signup",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Join the scent list" },
    { "type": "richtext", "id": "text", "label": "Text", "default": "<p>Exclusive drops, early access, and care tips.</p>" },
    { "type": "text", "id": "button_label", "label": "Button label", "default": "Subscribe" },
    { "type": "text", "id": "success_text", "label": "Success message", "default": "Thanksâ€”please check your inbox." },
    { "type": "select", "id": "alignment", "label": "Alignment", "default": "center",
      "options": [
        { "label": "Left", "value": "left" },
        { "label": "Center", "value": "center" },
        { "label": "Right", "value": "right" }
      ]
    },
    { "type": "range", "id": "padding_top", "label": "Padding top", "min": 0, "max": 120, "step": 4, "default": 48 },
    { "type": "range", "id": "padding_bottom", "label": "Padding bottom", "min": 0, "max": 120, "step": 4, "default": 48 }
  ],
  "presets": [{ "name": "Email signup" }]
}
{% endschema %}
